
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.9">
    
    
      
        <title>Create Premiere Proxies - pydavinci Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.120efc48.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.9647289d.min.css">
        
          
          
          <meta name="theme-color" content="#ab47bd">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/style.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#premiere-proxies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="pydavinci Docs" class="md-header__button md-logo" aria-label="pydavinci Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pydavinci Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Create Premiere Proxies
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pedrolabonia/pydavinci" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="pydavinci Docs" class="md-nav__button md-logo" aria-label="pydavinci Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    pydavinci Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pedrolabonia/pydavinci" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Create Premiere Proxies
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Create Premiere Proxies
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-code" class="md-nav__link">
    The code
  </a>
  
    <nav class="md-nav" aria-label="The code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing-pydavinci" class="md-nav__link">
    Importing pydavinci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-a-folder-to-import-to" class="md-nav__link">
    Setting up a folder to import to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-our-function" class="md-nav__link">
    Defining our function
  </a>
  
    <nav class="md-nav" aria-label="Defining our function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing-media" class="md-nav__link">
    Importing Media
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-render-jobs" class="md-nav__link">
    Creating render jobs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#render-time" class="md-nav__link">
    Render time!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resolve/" class="md-nav__link">
        Resolve
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../projectmanager/" class="md-nav__link">
        ProjectManager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../project/" class="md-nav__link">
        Project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mediastorage/" class="md-nav__link">
        MediaStorage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mediapool/" class="md-nav__link">
        MediaPool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mediapoolitem/" class="md-nav__link">
        MediaPool Item
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../folder/" class="md-nav__link">
        Folder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../timeline/" class="md-nav__link">
        Timeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../timelineitem/" class="md-nav__link">
        TimelineItem
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-code" class="md-nav__link">
    The code
  </a>
  
    <nav class="md-nav" aria-label="The code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing-pydavinci" class="md-nav__link">
    Importing pydavinci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-a-folder-to-import-to" class="md-nav__link">
    Setting up a folder to import to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-our-function" class="md-nav__link">
    Defining our function
  </a>
  
    <nav class="md-nav" aria-label="Defining our function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing-media" class="md-nav__link">
    Importing Media
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-render-jobs" class="md-nav__link">
    Creating render jobs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#render-time" class="md-nav__link">
    Render time!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/pedrolabonia/pydavinci/edit/master/docs/examples/premiereproxies.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 class="examples" id="premiere-proxies">Premiere Proxies</h1>
<h5 class='examples'><a target="_blank" href="https://github.com/pedrolabonia/pydavinci/blob/main/examples/premiere_proxies.py">Just show me the code <span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg></span></a></h5>

<p>We all know about Premieres <strong>particular</strong> need for proxies.</p>
<p>They have to be:</p>
<ul>
<li>
<p><span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 12h-2v3h-3v2h5v-5M7 9h3V7H5v5h2V9m14-6H3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 16H3V5h18v14Z"/></svg></span> Same aspect ratio as the original files</p>
<div class="highlight"><pre><span></span><code>Otherwise you end up with stretched proxies, and no one likes that.
</code></pre></div>
<hr />
</li>
<li>
<p><span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 11v2c5 0 9 4 9 9h2c0-6.1-4.9-11-11-11m18-9H10c-1.1 0-2 .9-2 2v6.5c1 .5 1.9 1.2 2.7 1.9.9-1.4 2.5-2.4 4.3-2.4 2.8 0 5 2.2 5 5s-2.2 5-5 5h-.2c.1.7.2 1.3.2 2h5c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-5 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m0 10c-.2 0-.5 0-.7-.1-.5-1.5-1.2-2.8-2.1-4 .4-1.1 1.5-2 2.8-2 1.7 0 3 1.3 3 3S16.7 18 15 18M2 15v2c2.8 0 5 2.2 5 5h2c0-3.9-3.1-7-7-7m0 4v3h3c0-1.7-1.3-3-3-3"/></svg></span> Same number of audio tracks as the original files</p>
<div class="highlight"><pre><span></span><code>This doesn&#39;t make sense, but that&#39;s how it is.
</code></pre></div>
<hr />
</li>
<li>
<p><span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 2v6H2V2h2M2 22v-6h2v6H2m3-10c0 1.11-.89 2-2 2a2 2 0 1 1 2-2m11-8c4.42 0 8 3.58 8 8s-3.58 8-8 8c-3.6 0-6.64-2.38-7.65-5.65L6 12l2.35-2.35C9.36 6.38 12.4 4 16 4m0 2c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m-1 7V8h1.5v4.2l3 1.8-.82 1.26L15 13Z"/></svg></span> Ideally same timecode</p>
<div class="highlight"><pre><span></span><code>Because otherwise you&#39;re going to have headaches.
</code></pre></div>
</li>
</ul>
<p>So you end up having to:</p>
<ul>
<li>Create proxies in Premiere and hope you have a nice 16x9 aspect ratio because that's what the default presets use.</li>
<li>Realize you have media mixed between DCI 4k and UHD and now you gotta create an individual encoding preset</li>
<li>Realize you have to create a Media Encoder encoding preset <img alt="😵‍💫" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f635-200d-1f4ab.svg" title=":face_with_spiral_eyes:" /></li>
</ul>
<p>If you ever had to do that at 2am you know that it works so badly it's not even funny. You create the preset and it tries to copy the files, or it can't import the preset into Premiere, or a thousand other weird things.</p>
<p>Then you decide to do just transcode everything in Davinci Resolve, which is probably what you should've done in the first place, but you still need to render everything in the same aspect ratio.</p>
<p>Let's fix that and hopefully come home early <img alt="🥳" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f973.svg" title=":partying_face:" /></p>
<hr />
<h2 id="the-code">The code</h2>
<h3 id="importing-pydavinci">Importing pydavinci</h3>
<p>Assuming we have <code>pydavinci</code> installed and have a Davinci project open, let's create a <code>premiere_proxies.py</code> file and import and define the objects we're going to use.</p>
<div class="highlight"><span class="filename">premiere_proxies.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">pydavinci</span> <span class="kn">import</span> <span class="n">davinci</span>

<span class="n">resolve</span> <span class="o">=</span> <span class="n">davinci</span><span class="o">.</span><span class="n">Resolve</span><span class="p">()</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">resolve</span><span class="o">.</span><span class="n">project</span>
<span class="n">project_manager</span> <span class="o">=</span> <span class="n">resolve</span><span class="o">.</span><span class="n">project_manager</span>
<span class="n">media_pool</span> <span class="o">=</span> <span class="n">resolve</span><span class="o">.</span><span class="n">media_pool</span>
<span class="n">media_storage</span> <span class="o">=</span> <span class="n">resolve</span><span class="o">.</span><span class="n">media_storage</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also programatically create a project. Check out <a class="autorefs autorefs-internal" href="../../project/#pydavinci.wrappers.project.Project-attributes"><code>Project</code></a></p>
</div>
<h3 id="setting-up-a-folder-to-import-to">Setting up a folder to import to</h3>
<p>Now let's create a folder on the media pool root folder, and set it as the current folder.</p>
<div class="highlight"><pre><span></span><code><span class="n">ocf_folder</span> <span class="o">=</span> <span class="n">media_pool</span><span class="o">.</span><span class="n">add_subfolder</span><span class="p">(</span><span class="s1">&#39;OCF&#39;</span><span class="p">,</span> <span class="n">media_pool</span><span class="o">.</span><span class="n">root_folder</span><span class="p">)</span>
<span class="n">media_pool</span><span class="o">.</span><span class="n">set_current_folder</span><span class="p">(</span><span class="n">ocf_folder</span><span class="p">)</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>OCF means <em>Original Camera Format</em></p>
</div>
<h3 id="defining-our-function">Defining our function</h3>
<p>Let's define our function to generate the Premiere proxies:</p>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_premiere_proxies</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">proxyfactor</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">):</span>
</code></pre></div>
Our function will take as parameters:</p>
<ul>
<li><code>input_dir</code>: a path to a folder containing all our media</li>
<li><code>output_dir</code>: output directory for our proxies</li>
<li><code>proxyfactor</code>: by how much we will reduce the resolution for the proxies</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><code>proxyfactor</code> is the number to divide the original resolution to.</p>
<p><strong>Example:</strong>
A <code>proxyfactor</code> of <code>1</code> on a <code>1920x1080</code> resolution will give you a <code>1920x1080</code> resolution proxy.</p>
<p>A <code>proxyfactor</code> of <code>1.5</code> on a <code>1920x1080</code> resolution will give you a <code>1280x720</code> resolution proxy.</p>
<p>A <code>proxyfactor</code> of <code>2</code> on a <code>1920x1080</code> resolution will give you a <code>960x540</code> resolution proxy</p>
</div>
<h4 id="importing-media">Importing Media</h4>
<p>Now we can import the media in our project, and figure out what resolutions they are</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_premiere_proxies</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">proxyfactor</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">):</span>
    <span class="n">media_pool</span><span class="o">.</span><span class="n">import_media</span><span class="p">(</span><span class="n">input_dir</span><span class="p">)</span>
    <span class="n">clips_res</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">media</span> <span class="ow">in</span> <span class="n">ocf_folder</span><span class="o">.</span><span class="n">clips</span><span class="p">:</span>
            <span class="n">clips_res</span><span class="p">[</span><span class="n">media</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;Resolution&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">media</span><span class="p">)</span>
</code></pre></div>
<p>We first import our media using the <a class="autorefs autorefs-internal" href="../../mediapool/#pydavinci.wrappers.mediapool.MediaPool.import_media"><code>media_pool.import_media()</code></a> method, which imports all valid(as judged by Resolve) media files from <code>input_dir</code> into the media pool on our current folder. We then create a <code>defaultdict</code> that we will use to store all resolutions from the media.</p>
<p>Then we loop for each <a class="autorefs autorefs-internal" href="../../mediapoolitem/#pydavinci.wrappers.mediapoolitem.MediaPoolItem-attributes"><code>MediaPoolItem</code></a> in the <a class="autorefs autorefs-internal" href="../../folder/#pydavinci.wrappers.folder.Folder.clips"><code>ocf_folder.clips</code></a> to grab each clip resolution, and store it in the <code>clips_res</code> dictionary which will end up looking like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">clips_res</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;1920x1080&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">MediaPoolItem1</span><span class="p">,</span> <span class="n">MediaPoolItem2</span><span class="p">],</span>
    <span class="s1">&#39;3840x2160&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">MediaPoolItem3</span><span class="p">,</span> <span class="n">MediaPoolItem4</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We're using a <code>defaultdict</code> to simplify our loop. If we used a regular dict, the first time we find a resolution we would have to first initiate it with a list value and then append to it. This way we don't need to check if we've seen this resolution before or not.</p>
</div>
<p>Now while the Resolve API is very powerful, it still lacks a way for us to set the default behavior of exporting audio channels to <code>Same as Source</code>, which is what we need for Premiere.. So now let's head to Davinci and create and save a render preset with that option enabled.</p>
<figure>
<p><img alt="Proxy Settings Figure 02" src="../../static/Resolve_02.png" /></p>
<figcaption>On the Audio tab, we make sure we're exporting audio and we select Same as source for the audio channels. This ensures that our proxy media can be linked without issue in Premiere. Save the preset as <code>Proxies_Preset</code></figcaption>
</figure>
<p>Now that we created our preset, let's make sure it's activated when we render the clips by using the <a class="autorefs autorefs-internal" href="../../project/#pydavinci.wrappers.project.Project.set_preset"><code>project.set_preset()</code></a> method.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_premiere_proxies</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">proxyfactor</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="n">project</span><span class="o">.</span><span class="n">set_preset</span><span class="p">(</span><span class="s2">&quot;Proxy_Preset&quot;</span><span class="p">)</span>
</code></pre></div>
<p>We've imported and grabbed all clips resolutions, and now we can start our main loop.</p>
<h4 id="creating-render-jobs">Creating render jobs</h4>
<p>First let's create an empty list which will contain our render jobs, then start our main loop and create a folder for each resolution we have and move the correct clips to that folder.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_premiere_proxies</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">proxyfactor</span><span class="p">):</span>

    <span class="o">...</span>

 <span class="n">render_ids</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">clips_res</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

        <span class="n">res_x</span><span class="p">,</span> <span class="n">res_y</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span> <span class="c1"># (1)</span>

        <span class="n">res_folder</span> <span class="o">=</span> <span class="n">media_pool</span><span class="o">.</span><span class="n">add_subfolder</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">ocf_folder</span><span class="p">)</span>
        <span class="n">clips</span> <span class="o">=</span> <span class="n">clips_res</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="c1"># (2)</span>

        <span class="n">media_pool</span><span class="o">.</span><span class="n">move_clips</span><span class="p">(</span><span class="n">clips</span><span class="p">,</span> <span class="n">res_folder</span><span class="p">)</span>
</code></pre></div>
<ol>
<li>
<p>When we grab resolutions from DaVinci, they come as a string, eg: <code>"1920x1080"</code>. We split the resolution to get the width and height</p>
</li>
<li>
<p>We create a new variable containing the list of <code>MediaPoolItem</code>s for our current resolution in the loop.</p>
</li>
</ol>
<p><small>Make sure to click the <span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"></path></svg></span> buttons in the code above for more information</small></p>
<p>Now we need to create a timeline containing all our <code>MediaPoolItem</code>s for the current resolution in the loop. We then activate that timeline and set the timeline resolution to be the same as the clip's resolutions, to avoid any letterboxing.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_premiere_proxies</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">proxyfactor</span><span class="p">):</span>

    <span class="o">...</span>

 <span class="n">render_ids</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">clips_res</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

        <span class="o">...</span>

        <span class="n">media_pool</span><span class="o">.</span><span class="n">create_timeline_from_clips</span><span class="p">(</span>
        <span class="n">res_folder</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="c1"># (1)</span>
        <span class="n">res_folder</span><span class="o">.</span><span class="n">clips</span>
        <span class="p">)</span>

        <span class="n">timeline</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">timeline</span>
        <span class="n">timeline</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="s2">&quot;useCustomSettings&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span> <span class="c1"># (2)</span>
        <span class="n">timeline</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="s2">&quot;timelineResolutionWidth&quot;</span><span class="p">,</span> <span class="n">res_x</span><span class="p">)</span>
        <span class="n">timeline</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="s2">&quot;timelineResolutionHeight&quot;</span><span class="p">,</span> <span class="n">res_y</span><span class="p">)</span>
</code></pre></div>
<ol>
<li>
<p>This is for the created timeline name. We're using the Folder name from before, which is set to be a string representing the resolution.</p>
</li>
<li>
<p>This allows us to set custom resolutions and framerates for timelines more easily through the Python API, without having to mess with the Project Settings.</p>
</li>
</ol>
<p>For the next step, we need to set our render settings. Let's calculate our desired rendered resolution using our provided <code>proxyfactor</code>, set our render format/codec and output directory.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_premiere_proxies</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">proxyfactor</span><span class="p">):</span>

    <span class="o">...</span>

<span class="n">render_ids</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">clips_res</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

        <span class="o">...</span>

        <span class="n">project</span><span class="o">.</span><span class="n">set_render_format_and_codec</span><span class="p">(</span><span class="s2">&quot;mp4&quot;</span><span class="p">,</span> <span class="s2">&quot;H264&quot;</span><span class="p">)</span>
        <span class="n">render_settings</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># (1)</span>
            <span class="s2">&quot;FormatWidth&quot;</span><span class="p">:</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">res_x</span><span class="p">)</span> <span class="o">//</span> <span class="n">proxyfactor</span><span class="p">),</span> <span class="c1"># (2)</span>
            <span class="s2">&quot;FormatHeight&quot;</span><span class="p">:</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">res_y</span><span class="p">)</span> <span class="o">//</span> <span class="n">proxyfactor</span><span class="p">),</span>
            <span class="s2">&quot;TargetDir&quot;</span><span class="p">:</span> <span class="n">output_dir</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">project</span><span class="o">.</span><span class="n">set_render_settings</span><span class="p">(</span><span class="n">render_settings</span><span class="p">)</span>
</code></pre></div>
<ol>
<li>
<p>The valid render settings that you can change are available at <a class="autorefs autorefs-internal" href="../../project/#pydavinci.wrappers.project.Project.set_render_settings">Project.set_render_settings()</a></p>
</li>
<li>
<p>The <code>\\</code> floor operator ensures we get an <code>int</code> back and not a <code>float</code></p>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If for any reason your render resolution ends up being an odd number, DaVinci will throw an error in the GUI and your script won't be able to continue.</p>
</div>
<p>Now we're almost done! Just add the current timeline and render settings to the render queue, and append it to our <code>render_ids</code> list</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_premiere_proxies</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">proxyfactor</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="n">render_ids</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">clips_res</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

        <span class="o">...</span>

        <span class="n">render_id</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">add_renderjob</span><span class="p">()</span>
        <span class="n">render_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">render_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render_ids</span>
</code></pre></div>
<h3 id="render-time">Render time!</h3>
<p>Now we can get our <code>job_ids</code> and render them out!:</p>
<div class="highlight"><pre><span></span><code><span class="n">job_ids</span> <span class="o">=</span> <span class="n">generate_premiere_proxies</span><span class="p">(</span>
    <span class="s2">&quot;Path/To/Folder/With/Clips&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Path/To/Output/Folder,</span>
    <span class="n">proxyfactor</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">project</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">job_ids</span><span class="p">)</span>
</code></pre></div>
<p>Resolve will start rendering all our timelines with our clips, and in the end we'll have proxies ready to be edited by Premiere.</p>
<p><a href="https://github.com/pedrolabonia/pydavinci/blob/main/examples/premiere_proxies.py">Check out the full code here</a>, with some extra functionality at the end which just prints out a nice message on render times left and total render time.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="../../resolve/" class="md-footer__link md-footer__link--next" aria-label="Next: Resolve" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Resolve
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6e54b5cd.min.js"></script>
      
    
  </body>
</html>